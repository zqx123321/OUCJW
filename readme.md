# OUCJW接口说明文档 Python垃圾，请移步Java版：https://github.com/zqx123321/OucFly
>声明：爬教务处爬了一年多了，能爬的都爬了，最近在做微信小程序，把功能封装了一下，整理出了以下接口，供感兴趣的人使用。请合理利用，切勿随意泄露成绩选课币等数据，部分数据可能不准确，请以教务处为准。最后，感谢罗梁学长给我的指导。
## 1、模拟登录，获取cookie

### 1) 请求地址

>https://www.ouctechnology.cn/wechat/Login/

### 2) 调用方式：HTTP post

### 3) 接口描述：

* 模拟登录教务处，获取cookie。此接口是以下所有接口的公共基础，以下所有接口的活动都是在模拟登录成功的基础上进行的。

### 4) 请求参数:


#### POST参数:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|username||string|Y|学号|
|password||string|Y|教务系统密码(由于post数据会被URLEncode，所以请勿在密码中包含"+"等敏感符号)|



### 5) 请求返回结果:

```
{
    "message": "操作成功!",
    "result": "http://222.195.158.225/oucjw/MainFrm.html",
    "status": "200"
}
```


### 6) 请求返回结果参数说明:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|message||string|Y|状态短语|
|result||string|Y|选择的HOST|
|status||string|Y|状态码，200表示成功，403表示用户名或密码错误|



## 2、获取任意学号成绩

### 1) 请求地址

>https://www.ouctechnology.cn/wechat/getGrade/

### 2) 调用方式：HTTP post

### 3) 接口描述：

* 获取任意学号成绩，并可以得到加权平均分。只给等级没有成绩的按照如下规则换算：优秀:90,良好:80,中等:70,合格:60,不合格:0,通过:60,不通过:0。若存在刷分情况，则取最高分。

### 4) 请求参数:


#### POST参数:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|xn||string|Y|学年，如2017,2016|
|xq||string|Y|学期，0-夏季学期，1-秋季学期，2-春季学期，3-入学以来所有成绩|
|userCode||string|Y|学号|



### 5) 请求返回结果:

```
{
    "name": "张钦贤",
    "average": 92.57446808510639,
    "score": 23.5,
    "data": [
        {
            "classname": "操作系统",
            "grade": "97.0",
            "score": "3.5"
        },
        {
            "classname": "操作系统课程设计",
            "grade": "91.5",
            "score": "0.5"
        },
        {
            "classname": "计算机网络",
            "grade": "98.0",
            "score": "3.5"
        },
        {
            "classname": "数据库系统",
            "grade": "98.0",
            "score": "3.5"
        },
        {
            "classname": "数据库系统课程设计",
            "grade": "97.5",
            "score": "0.5"
        },
        .
        .
        .
        .
        .
    ]
}
```


### 6) 请求返回结果参数说明:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|name||string|Y|被查询者姓名|
|average||string|Y|被查询者该学期加权平均分|
|score||string|Y|被查询者该学期选课总学分|
|data||string|Y|成绩数据|
|classname||string|Y|课程名称|
|grade||string|Y|课程成绩|



## 3、获取任意课程的选课名单

### 1) 请求地址

>https://www.ouctechnology.cn/wechat/getUserCode/

### 2) 调用方式：HTTP post

### 3) 接口描述：

* 由选课号获取任意课程的选课名单，选中的没选中的都会在结果中

### 4) 请求参数:


#### POST参数:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|xn||string|Y|学年，如2017,2016|
|xq||string|Y|学期，0-夏季学期，1-秋季学期，2-春季学期|
|classCode||string|Y|8位的选课号|



### 5) 请求返回结果:

```
{
    "students": [
        {
            "userfaculty": "信息科学与工程学院",
            "usermajor": "计算机科学与技术",
            "username": "刘圣章",
            "usercode": "14020031060",
            "usersex": "男"
        },
        {
            "userfaculty": "信息科学与工程学院",
            "usermajor": "计算机科学与技术",
            "username": "赵树",
            "usercode": "14020031138",
            "usersex": "男"
        },
        {
            "userfaculty": "信息科学与工程学院",
            "usermajor": "计算机科学与技术",
            "username": "郑情雨",
            "usercode": "14020031141",
            "usersex": "男"
        },
        .
        .
        .
        .
        .

    ]
}
```


### 6) 请求返回结果参数说明:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|students||string|Y|数据集|
|userfaculty||string|Y|学院|
|usermajor||string|Y|专业|
|username||string|Y|姓名|
|usercode||string|Y|学号|
|usersex||string|Y|性别|



## 4、获取任意学号向任意课程投的选课币

### 1) 请求地址

>https://www.ouctechnology.cn/wechat/getUserCoin/

### 2) 调用方式：HTTP post

### 3) 接口描述：

* 获取任意学号向任意课程投的选课币

### 4) 请求参数:


#### POST参数:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|xn||string|Y|学年，如2017,2016|
|xq||string|Y|学期，0-夏季学期，1-秋季学期，2-春季学期|
|classCode||string|Y|11位选课号|
|userCode||string|Y|学号|



### 5) 请求返回结果:

```
{
    "coin": "33"
}
```


### 6) 请求返回结果参数说明:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|coin||string|Y|选课币|


## 5、获取任意学号课表

### 1) 请求地址

>https://www.ouctechnology.cn/wechat/getClassTable/

### 2) 调用方式：HTTP post

### 3) 接口描述：

* 获取任意学号课表，返回结果是一个三维数组。数组第一维表示天，即每天的课程，数组的第二维表示时间，即每个时间的课程，数组的第三位表示课程，即这个时间段有几节课。

### 4) 请求参数:


#### POST参数:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|xn||string|Y|学年，如2017,2016|
|xq||string|Y|学期，0-夏季学期，1-秋季学期，2-春季学期|
|userCode||string|Y|学号|



### 5) 请求返回结果（比较复杂，需要自己领悟）:

```
[
    [],
    [],
    [],
    [],
    [],
    [],
    []
]

[
    [
            {
            },
        [
            {
                "name":"编译原理",
                "detail":"编译原理 葛琳 1-9周[3-4] 4404 上8次课。第四周开始可排实验，信息学院南楼B317 选中编译原理课程设计 葛琳 10-17周[3-4] 信息学院南楼B317 选中",
                "teacher":"葛琳"
            }
        ],
        [
            {
                "name":"操作系统",
                "detail":"操作系统 林喜军 1-12周[5-6] 5302 选中操作系统课程设计 林喜军 13-17周[5-6] 信息学院南楼A310 选中",
                "teacher":"林喜军"
            }
        ],
            {
            },
        [
            {
                "name":"计算机网络",
                "detail":"计算机网络 唐瑞春 13-17周[10-12] 实验，信息学院南楼A310 选中",
                "teacher":"唐瑞春"
            }
        ]
    ],
    [],
    [],
    [],
    [],
    [],
    []
]
```

## 6、获取全校所有的专业

### 1) 请求地址

>https://www.ouctechnology.cn/wechat/getMajor/

### 2) 调用方式：HTTP get

### 3) 接口描述：

* 获取全校所有的专业，得到专业代号可以在后续接口中利用

### 4) 请求参数:

无

### 5) 请求返回结果:

```
{
    "data": [
        {
            "id": 2,
            "major": "海洋科学"
        },
        {
            "id": 3,
            "major": "大气科学"
        },
        {
            "id": 4,
            "major": "物理学"
        },
        .
        .
        .
        .

    ]
}
```

### 6) 请求返回结果参数说明:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|data||string|Y|数据集|
|id||int|Y|专业代号|
|major||string|Y|专业名称|


## 8、获取任意专业任意年级的学生名单

### 1) 请求地址

>https://www.ouctechnology.cn/wechat/getUser/

### 2) 调用方式：HTTP post

### 3) 接口描述：

* 获取任意专业任意年级的学生名单

### 4) 请求参数:


#### POST参数:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|major||string|Y|专业代号(上一个接口中返回的专业代号)|
|nj||string|Y|年级，如15,16,17....|



### 5) 请求返回结果:

```
{
    "data": [
        {
            "username": "格桑次仁",
            "usercode": "15020031016",
            "usersex": "男"
        },
        {
            "username": "洪一明",
            "usercode": "15020031019",
            "usersex": "男"
        },
        {
            "username": "江世尧",
            "usercode": "15020031022",
            "usersex": "男"
        },
        {
            "username": "马海峰",
            "usercode": "15020031053",
            "usersex": "男"
        },
        .
        .
        .
        .

    ]
}
```


### 6) 请求返回结果参数说明:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|data||string|Y|数据集|
|username||string|Y|姓名|
|usercode||string|Y|学号|
|usersex||string|Y|性别|


## 9、由选课号获取课程号

### 1) 请求地址

>https://www.ouctechnology.cn/wechat/getClassName/

### 2) 调用方式：HTTP post

### 3) 接口描述：

* 由选课号获取课程号，得到的课程号可以在后续接口中利用。

### 4) 请求参数:


#### POST参数:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|xn||string|Y|学年，如2017,2016|
|xq||string|Y|学期，0-夏季学期，1-秋季学期，2-春季学期|
|classCode||string|Y|选课号|
|userCode||string|Y|学号|



### 5) 请求返回结果（课程号）:

```
008201103063
```





## 10、获取某位同学某门课的成绩

### 1) 请求地址

>https://www.ouctechnology.cn/wechat/getClassGrade/

### 2) 调用方式：HTTP post

### 3) 接口描述：

* 获取某位同学某门课的成绩，需要用到上一个接口中的课程号

### 4) 请求参数:


#### POST参数:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|xn||string|Y|学年，如2017,2016|
|xq||string|Y|学期，0-夏季学期，1-秋季学期，2-春季学期|
|classCode||string|Y|课程号（非选课号！！！上一个接口中获取）|
|userCode||string|Y|学号（该同学必须选了这门课）|



### 5) 请求返回结果:

```
{
    "score": "97.0"
}
```


### 6) 请求返回结果参数说明:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------:|
|score||string|Y|成绩|



## 11、根据姓名获取学号

### 1) 请求地址

>https://www.ouctechnology.cn/wechat/getUserByName/

### 2) 调用方式：HTTP post

### 3) 接口描述：

* 根据姓名获取学号，查询为模糊查询

### 4) 请求参数:


#### POST参数:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|name||string|Y|姓名|



### 5) 请求返回结果:

```
{
    "data": [
        {
            "usercode": "15020031106",
            "usersex": "男",
            "username": "张钦贤",
            "usermajor": "计算机科学与技术"
        }
    ]
}
```


### 6) 请求返回结果参数说明:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|data||string|Y|数据集|
|usercode||string|Y|学号|
|usersex||string|Y|性别|
|username||string|Y|姓名|
|usermajor||string|Y|专业|



## 12、由课程名获取选课号

### 1) 请求地址

>https://www.ouctechnology.cn/wechat/getClassCode/

### 2) 调用方式：HTTP post

### 3) 接口描述：

* 由课程名获取选课号，查询为模糊查询，由于专业课数量繁多，只提供信息学院的专业课查询

### 4) 请求参数:


#### POST参数:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|xn||string|Y|学年，如2017,2016|
|xq||string|Y|学期，0-夏季学期，1-秋季学期，2-春季学期，3-入学以来所有成绩|
|classtype||string|Y|课程类别：Specialty-专业课, PublicBasic-公共基础课, Common-通识选修课]|
|classname||string|Y|课程名称，如数学|



### 5) 请求返回结果:

```
{
    "data": [
        {
            "code": "16001093",
            "name": "数学思想与数学文化",
            "teacher": "张若军   "
        },
        {
            "code": "16001094",
            "name": "数学思想与数学文化",
            "teacher": "刘文静   "
        },
        {
            "code": "14006002",
            "name": "数学、天文与物理",
            "teacher": "高翔 张若军 钱致榕 "
        },
        {
            "code": "16001092",
            "name": "著名数学猜想和定理探究",
            "teacher": "朴大雄   "
        },
        {
            "code": "16002001",
            "name": "数学建模",
            "teacher": "曹圣山   "
        },
        {
            "code": "16002002",
            "name": "数学建模",
            "teacher": "曹圣山   "
        }
    ]
}
```


### 6) 请求返回结果参数说明:
|字段名称       |字段说明         |类型            |必填            |备注     |
| -------------|:--------------:|:--------------:|:--------------:| ------|
|data||string|Y|数据集|
|code||string|Y|选课号|
|name||string|Y|课程名字|
|teacher||string|Y|授课教师|
